@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage<Dnn.Bce.Dnn.Idopontfoglalas.Models.ReservationEntity>
@using DotNetNuke.Web.Client.ClientResourceManagement
@using DotNetNuke.Framework.JavaScriptLibraries
@{
    ViewBag.Title = "Új foglalás létrehozása";
}

@*<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    var serviceUrl = 'http://www.dnndev.me/API/Dnn.Bce.Dnn.Idopontfoglalas/';

    var url = serviceUrl + "ReservationApiController/CreateReservation";

    $('#reservationForm').submit(function (event) {
        event.preventDefault();

        var reservationData = {
            Name: $("#Name").val(),
            Email: $("#Email").val(),
            Phone: $("#Phone").val(),
            Time: $("#Time").val(),
            Quantity: parseInt($("#Quantity").val())
        };
        console.log("ajax előtt");
        $.ajax({
            url: url,
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(reservationData),
            success: function (response) {
                alert('Foglalás sikeresen létrehozva!');
                window.location.href = 'http://www.dnndev.me/';
            },
            error: function (xhr, status, error) {
                alert('Hiba történt: ' + error);
            }
        });
        console.log("ajax után");

    });
</script>*@


<div class="reservation-create-container">
    <h2>Új foglalás</h2>

    <form method="post" id=reservationForm">
        <div class="form-group mb-3">
            <label for="Name">Név</label>
            <input type="text" class="form-control" id="Name" name="Name" placeholder="Teljes név" required />
        </div>

        <div class="form-group mb-3">
            <label for="Email">E-mail</label>
            <input type="email" class="form-control" id="Email" name="Email" placeholder="E-mail cím" required />
        </div>

        <div class="form-group mb-3">
            <label for="Phone">Telefonszám</label>
            <input type="text" class="form-control" id="Phone" name="Phone" placeholder="Telefonszám" required />
        </div>

        <div class="form-group mb-3">
            <label for="StartTime">Időpont</label>
            <input type="datetime-local" class="form-control" id="StartTime" name="StartTime" required />
        </div>

        <div class="form-group mb-3">
            <label for="Quantity">Hány főre?</label>
            <input type="number" class="form-control" id="Quantity" name="Quantity" placeholder="fők száma" value=4 required />
        </div>

        <button type="submit" class="btn btn-primary">Foglalás mentése</button>
    </form>
</div>

